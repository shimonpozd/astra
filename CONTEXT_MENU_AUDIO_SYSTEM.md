# 🎵 Система контекстного меню для аудио

Теперь **существующая кнопка проигрывания** в панелях получила расширенную функциональность через **правый клик**!

## 🎯 Как это работает

### **Обычный клик** - быстрая озвучка
- Левый клик на кнопку ▶️ - **быстрое воспроизведение** (как раньше)
- Использует существующую функциональность `handleSpeechify`

### **Правый клик** - расширенные опции
- Правый клик на кнопку ▶️ - **контекстное меню** с выбором режима
- Три варианта: быстрое, стриминг, сообщение в чат

## 🎛️ Контекстное меню

### **Быстрое воспроизведение** ⚡
- Мгновенное воспроизведение без сохранения
- Использует `SimpleStreamingTTS`
- Для быстрого прослушивания

### **Стриминг + сохранение** 🎛️
- С контролем воспроизведения (пауза, перемотка)
- Возможность сохранения в чат
- Использует `StreamingAudioMessage`

### **Сообщение в чат** 💬
- Создает аудио сообщение в чате
- Можно переслушивать и скачивать
- Использует `AudioTTSButton`

## 🎨 UI/UX

### **В панелях Workbench:**
```
[Перевести] [▶️ Проигрывать] [🗑️ Очистить]
```

### **При правом клике на ▶️:**
```
┌─────────────────────────────────────┐
│ 🎵 Озвучить текст              [×] │
├─────────────────────────────────────┤
│ Текст для озвучки...                │
├─────────────────────────────────────┤
│ ⚡ Быстрое воспроизведение          │
│ 🎛️ Стриминг + сохранение           │
│ 💬 Сообщение в чат                  │
└─────────────────────────────────────┘
```

## 🔧 Техническая реализация

### **WorkbenchPanelInline:**
```tsx
// Существующая кнопка получила правый клик
<button
  onClick={handleSpeechify}           // Левый клик - быстрое воспроизведение
  onContextMenu={(e) => {            // Правый клик - контекстное меню
    e.preventDefault();
    setMenuPosition({ x: e.clientX, y: e.clientY });
    setShowAudioMenu(true);
  }}
  title="Проигрывать текст (правый клик для опций)"
>
  {isPlaying ? <Pause /> : <Play />}
</button>
```

### **AudioContextMenu:**
```tsx
<AudioContextMenu
  text={textToPlay}
  isVisible={showAudioMenu}
  onClose={() => setShowAudioMenu(false)}
  position={menuPosition}
/>
```

## 🎯 Пользовательский опыт

### **Быстрое прослушивание:**
1. **Левый клик** на ▶️ - аудио играет сразу
2. **Правый клик** → "Быстрое воспроизведение" - то же самое

### **Расширенные опции:**
1. **Правый клик** на ▶️
2. Выбор режима из меню
3. Полный контроль над аудио

### **Сохранение в чат:**
1. **Правый клик** → "Сообщение в чат"
2. Создается аудио сообщение
3. Можно переслушивать в истории

## 🚀 Преимущества

✅ **Не ломает существующий UX** - левый клик работает как раньше  
✅ **Расширяет функциональность** - правый клик дает больше опций  
✅ **Интуитивно** - правый клик = контекстное меню  
✅ **Не засоряет интерфейс** - опции скрыты до востребования  
✅ **Гибкость** - пользователь сам выбирает уровень функциональности  

## 🎵 Результат

Теперь система работает **идеально**:

- **Обычные пользователи** - левый клик для быстрого прослушивания
- **Продвинутые пользователи** - правый клик для полного контроля
- **Чистый интерфейс** - никаких лишних кнопок
- **Максимальная функциональность** - все опции доступны по запросу

Пользователи получают **лучшее из двух миров** - простоту и мощь! 🎯🎵


