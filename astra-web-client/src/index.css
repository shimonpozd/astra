@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+Hebrew:wght@400;500;600;700&display=swap');
@import url('https://fonts.googleapis.com/css2?family=Noto+Rashi+Hebrew:wght@100..900&display=swap');


/* Custom Hebrew font - Mugrabi Regular */
@font-face {
  font-family: 'Mugrabi';
  src: url('/fonts/mugrabi-regular-aaa.woff2') format('woff2');
  font-weight: 400;
  font-style: normal;
  font-display: swap;
}

@tailwind base;
@tailwind components;
@tailwind utilities;

@layer components {
  /* Контейнер для ВСЕГО doc.v1 */
  .doc {
    @apply mx-auto max-w-[85ch] text-[15.5px] leading-7 antialiased;
  }

  /* Цвета (подтягиваются из вашей темы) */
  :root {
    --doc-fg: var(--foreground, #c2c0b6);
    --doc-dim: color-mix(in oklab, var(--doc-fg) 80%, black);
    --doc-accent: #c8e3ff;
    --doc-muted: color-mix(in oklab, var(--doc-fg) 60%, black);
    --doc-border: color-mix(in oklab, var(--doc-fg) 18%, black);
    --doc-code-bg: color-mix(in oklab, var(--doc-fg) 7%, black);
    --doc-quote-bg: color-mix(in oklab, var(--doc-fg) 4%, black);
    --doc-hr: color-mix(in oklab, var(--doc-fg) 12%, black);
    --doc-link: #9fd1ff;
    --doc-link-hover: #cfe8ff;
  }

  /* Базовый вертикальный ритм */
  .doc p,
  .doc ul,
  .doc ol,
  .doc blockquote,
  .doc pre,
  .doc table,
  .doc hr {
    @apply mb-4;
  }

  /* Абзац */
  .doc p {
    @apply selection:bg-white/20;
  }

  /* Ссылки */
  .doc a {
    color: var(--doc-link);
    text-decoration: none;
    border-bottom: 1px dashed color-mix(in oklab, var(--doc-link) 50%, transparent);
  }
  .doc a:hover {
    color: var(--doc-link-hover);
    border-bottom-style: solid;
  }

  /* Жирный/курсив/код-inline */
  .doc strong { @apply font-semibold; }
  .doc em { @apply italic; }
  .doc code {
    @apply text-[0.95em] px-1 py-0.5 rounded;
  }

  /* Многострочный код */
  .doc pre {
    @apply rounded-xl p-4 overflow-auto;
    border: 1px solid var(--doc-border);
  }
  .doc pre code { @apply p-0 bg-transparent; }

  /* Цитаты */
  .doc blockquote {
    @apply rounded-xl p-3 ps-4 pe-4;
    border-left: 3px solid var(--doc-border);
    color: var(--doc-dim);
  }

  /* Списки */
  .doc ul { @apply list-disc ms-6; }
  .doc ol { @apply list-decimal ms-6; }
  .doc li { @apply mb-1; }
  .doc li > ul, .doc li > ol { @apply mt-1 mb-0; }

  /* Горизонтальная линия */
  .doc hr {
    border: none;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--doc-hr), transparent);
    @apply my-6;
  }

  /* Таблицы */
  .doc table { @apply w-full border-collapse text-[15px]; }
  .doc th, .doc td {
    @apply border border-[var(--doc-border)] px-3 py-2 align-top;
  }
  .doc th { @apply font-medium; }

  /* Термины (если используете block:"term") */
  .doc .term {
    @apply rounded-xl p-3 border border-[var(--doc-border)];
  }
  .doc .term .term-title {
    @apply text-sm uppercase tracking-wide text-[var(--doc-muted)] mb-2;
  }

  /* Изображения и figure */
  .doc figure { @apply my-4; }
  .doc img { @apply rounded-xl border border-[var(--doc-border)] mx-auto; }
  .doc figcaption { @apply text-sm text-[var(--doc-muted)] mt-2 text-center; }

  /* Поддержка RTL и иврита */
  .doc[dir="rtl"],
  .doc :where([dir="rtl"], [lang="he"], [lang="he-IL"], [lang="ar"]) {
    direction: rtl;
    text-align: start;
  }
  .doc :where([lang="he"], [lang="he-IL"]) {
    /* если есть Noto Rashi Hebrew/Mugrabi — используйте */
    font-family: "Noto Rashi Hebrew", "Mugrabi", "Noto Sans Hebrew", ui-serif, Georgia, serif;
    /* делаем немного крупнее для читабельности */
    font-size: 16.25px;
    line-height: 1.85;
  }

  /* Маленькие элементы UI внутри текста */
  .doc kbd {
    @apply text-[0.85em] px-1.5 py-0.5 rounded border;
    border-color: var(--doc-border);
  }
}

@layer base {
  :root {
    /* Claude-style colors */
    --background: #1f1e1d;       /* фон страницы - Claude dark */
    --foreground: #c2c0b6;       /* базовый текст - Claude light */

    /* Поверхности */
    --card: #2a2927;             /* фон карточек/панелей */
    --card-foreground: #c2c0b6;
    --popover: #333230;          /* выпадающие меню */
    --popover-foreground: #c2c0b6;

    /* Акцент/праймари */
    --primary: #7c3aed;          /* фиолетовый; btn/ссылки */
    --primary-foreground: #ffffff;
    --accent: #3a3936;           /* hover фона, боковые подсветки */
    --accent-foreground: #c2c0b6;

    /* Вторичные/мьют */
    --secondary: #3a3936;        /* пузыри пользователя, втор. кнопки */
    --secondary-foreground: #c2c0b6;
    --muted: #2a2927;            /* код/блок цитаты */
    --muted-foreground: #9b9992;

    /* Границы и инпуты */
    --border: #4a4843;
    --input: #3a3936;            /* поля ввода/textarea */

    /* Состояния */
    --destructive: #ef4444;      /* ошибка/удаление */
    --destructive-foreground: #ffffff;
    --success: #22c55e;          /* подтверждение */
    --warning: #f59e0b;          /* предупреждение */
    --info: #60a5fa;             /* информационные */

    /* Прочее */
    --ring: #7c3aed;             /* focus ring */
    --radius: 8px;               /* базовый радиус */

    /* Map to Tailwind/shadcn variables */
    --background: 30 8% 12%;      /* #1f1e1d */
    --foreground: 45 8% 76%;     /* #c2c0b6 */
    --card: 30 8% 16%;           /* #2a2927 */
    --card-foreground: 45 8% 76%; /* #c2c0b6 */
    --popover: 30 8% 20%;        /* #333230 */
    --popover-foreground: 45 8% 76%; /* #c2c0b6 */
    --primary: 262 83% 58%;      /* #7c3aed */
    --primary-foreground: 0 0% 100%; /* #ffffff */
    --secondary: 30 8% 23%;      /* #3a3936 */
    --secondary-foreground: 45 8% 76%; /* #c2c0b6 */
    --muted: 30 8% 16%;          /* #2a2927 */
    --muted-foreground: 45 8% 60%; /* #9b9992 */
    --accent: 30 8% 23%;         /* #3a3936 */
    --accent-foreground: 45 8% 76%; /* #c2c0b6 */
    --destructive: 0 84% 60%;    /* #ef4444 */
    --destructive-foreground: 0 0% 100%; /* #ffffff */
    --border: 30 8% 29%;         /* #4a4843 */
    --input: 30 8% 23%;          /* #3a3936 */
    --ring: 262 83% 58%;         /* #7c3aed */
  }

  .dark {
    --background: 30 8% 12%;      /* #1f1e1d */
    --foreground: 45 8% 76%;     /* #c2c0b6 */
    --card: 30 8% 16%;           /* #2a2927 */
    --card-foreground: 45 8% 76%; /* #c2c0b6 */
    --popover: 30 8% 20%;        /* #333230 */
    --popover-foreground: 45 8% 76%; /* #c2c0b6 */
    --primary: 262 83% 58%;      /* #7c3aed */
    --primary-foreground: 0 0% 100%; /* #ffffff */
    --secondary: 30 8% 23%;      /* #3a3936 */
    --secondary-foreground: 45 8% 76%; /* #c2c0b6 */
    --muted: 30 8% 16%;          /* #2a2927 */
    --muted-foreground: 45 8% 60%; /* #9b9992 */
    --accent: 30 8% 23%;         /* #3a3936 */
    --accent-foreground: 45 8% 76%; /* #c2c0b6 */
    --destructive: 0 84% 60%;    /* #ef4444 */
    --destructive-foreground: 0 0% 100%; /* #ffffff */
    --border: 30 8% 29%;         /* #4a4843 */
    --input: 30 8% 23%;          /* #3a3936 */
    --ring: 262 83% 58%;         /* #7c3aed */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  html, body, #root {
    height: 100%;
    overflow: hidden;
  }

  body {
    @apply bg-background text-foreground;
    font-family: Inter, "SF Pro Text", "Segoe UI", Roboto, system-ui, sans-serif;
    font-size: 14px;
    line-height: 1.55;
    letter-spacing: 0;
  }

  /* Hebrew text helper */
  .hebrew-text {
    font-family: 'Noto Sans Hebrew', 'Mugrabi', 'Arial Hebrew', 'Times New Roman', serif;
    direction: rtl;
    text-align: justify;
    letter-spacing: 0.01em;
    word-spacing: 0.1em;
  }
  .hebrew-muted {
    font-family: 'Noto Sans Hebrew', 'Mugrabi', 'Arial Hebrew', 'Times New Roman', serif;
    direction: rtl;
    text-align: justify;
  }

  /* Noto Rashi Hebrew for commentaries */
  .noto-rashi-hebrew-regular {
    font-family: "Noto Rashi Hebrew", serif;
    font-optical-sizing: auto;
    font-weight: 400;
    font-style: normal;
  }

  /* Typography */
  h1, h2, h3, h4, h5, h6 {
    font-family: Inter, "SF Pro Text", "Segoe UI", Roboto, system-ui, sans-serif;
  }

  /* Code blocks */
  pre {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
    font-size: 13px;
    line-height: 1.5;
    background-color: hsl(var(--muted));
    border: 1px solid hsl(var(--border));
    border-radius: 8px;
    padding: 12px 16px;
    overflow-x: auto;
  }

  code {
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, "Courier New", monospace;
    font-size: 13px;
    background-color: rgba(255, 255, 255, 0.04);
    border-radius: 6px;
    padding: 0 6px;
  }

  /* Lists */
  ul, ol {
    padding-left: 1.25rem;
  }

  ul {
    list-style-type: disc;
  }

  ol {
    list-style-type: decimal;
  }

  /* Blockquotes */
  blockquote {
    border-left: 1px solid hsl(var(--border));
    background-color: hsl(var(--muted));
    padding: 12px 16px;
    margin: 16px 0;
    border-radius: 0 8px 8px 0;
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: hsl(var(--muted));
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--border));
    border-radius: 4px;
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--muted-foreground));
  }

  /* Focus styles */
  *:focus-visible {
    outline: 1px solid hsl(var(--ring));
    outline-offset: 1px;
  }

  /* Selection */
  ::selection {
    background-color: hsl(var(--primary) / 0.2);
  }
}
