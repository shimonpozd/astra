# ТЗ для Frontend: Отображение списка комментаторов

## 1. Цель

Отобразить в интерфейсе список комментаторов, который агент находит с помощью инструмента `sefaria_get_links`. Это позволит пользователю видеть, какие именно комментарии доступны для дальнейшего изучения, и сделает работу агента более прозрачной.

## 2. Новое событие: `commentators_list`

Бэкенд теперь отправляет новое структурированное событие в общем `ndjson` потоке.

- **Тип события**: `commentators_list`
- **Когда отправляется**: Сразу после того, как агент успешно вызывает инструмент `sefaria_get_links`.

### Структура события

```json
{
  "type": "commentators_list",
  "data": {
    "reference": "Shabbat 25a.1", 
    "commentators": [
      {
        "anchorRef": "Rashi on Shabbat 25a:1:1",
        "category": "Commentary",
        "sourceHeRef": "רש"י על שבת כה א:א:א",
        "sourceRef": "Rashi on Shabbat 25a:1:1",
        "commentator": "Rashi"
      },
      {
        "anchorRef": "Tosafot on Shabbat 25a:1:1",
        "category": "Commentary",
        "sourceHeRef": "תוספות על שבת כה א:א:א",
        "sourceRef": "Tosafot on Shabbat 25a:1:1",
        "commentator": "Tosafot"
      }
    ]
  }
}
```

- `data.reference`: ссылка на основной текст, для которого искали комментарии.
- `data.commentators`: массив объектов, где каждый объект — это найденный комментатор (ссылка). Ключевые поля для отображения: `commentator`, `sourceRef`, `sourceHeRef`.

## 3. Предлагаемый UI/UX

1.  **Место отображения**: Этот список должен появляться в той же правой панели, где сейчас отображаются источники (`source`).

2.  **Внешний вид**: Рекомендуется создать для этого списка отдельный компонент или "карточку".
    *   **Заголовок**: "Комментаторы для: [data.reference]"
    *   **Содержимое**: Простой список, где каждый элемент — это один комментатор. Для каждого элемента можно вывести его название на иврите (`sourceHeRef`) и/или на английском (`commentator`).

3.  **Интерактивность (на будущее)**: В идеале, каждый элемент списка должен быть кликабельным. Клик по нему мог бы в будущем инициировать запрос на загрузку полного текста этого комментария. На первом этапе достаточно просто отобразить список.

## 4. Логика работы Frontend

В основном обработчике событий потока (`ndjson`) нужно добавить новый `case` для `event.type`:

```javascript
// ... в цикле обработки событий
const event = JSON.parse(line);

switch (event.type) {
  case 'source':
    // ... логика отображения источника
    break;

  case 'commentators_list':
    // НОВАЯ ЛОГИКА
    // 1. Взять event.data
    // 2. Отрисовать новый компонент в правой панели
    //    с заголовком event.data.reference и списком event.data.commentators
    break;

  // ... другие типы событий
}
```

